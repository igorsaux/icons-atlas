# Icons-Atlas

**Icons-Atlas** - это комплект ПО для создания удобного поиска по иконкам проектов созданных на платформе BYOND.

На ветке `master` хранится:
 - Бинарные файлы упаковщика, для ежедневного обновления индексов.
 - Сериализованные и сжатые данные (Brotli) индексов и иконок.

На ветке `dev` хранится:
 - Исходный код упаковщика и индексатора иконок.
 - WASM библиотека, которая работает с упакованными ресурсами и предоставляет API для работы с ними через JavaScript.
 - Исходный код веб-приложения (PWA) представляющий из себя front-end поисковика, для его сборки требуется предварительно собрать WASM библиотеку.

Поисковый движок работает на [Tantivy](https://github.com/quickwit-oss/tantivy).

Этот репозитории настроен на работу с [OnyxBay](https://github.com/ChaoticOnyx/OnyxBay).

## Сборка

Для сборки требуется установить: Rust, wasm-pack, NodeJS.

В первую очередь необходимо собрать WASM библиотеку (и собирать при каждом её изменений):

```console
$ cd utils/crates/icons-atlas
$ wasm-pack build --target web
```

В этой же папке должна появится директория `pkg`, её необходимо перенести в папку `web/src/`:
```console
$ cd ../../../
$ mv utils/crates/icons-atlas/pkg web/src/
```

Далее установить все зависимости веб-приложения (выполняется единожды):
```console
$ cd web/
$ npm install
```

Сборка веб-приложения:
```console
$ npm run build
```
